(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesB/pages/center/baseInfo/baseInfo"],{"0f97":function(e,n,o){},"22b0":function(e,n,o){"use strict";(function(e){o("b2d2");a(o("66fd"));var n=a(o("bf08"));function a(e){return e&&e.__esModule?e:{default:e}}e(n.default)}).call(this,o("543d")["createPage"])},5284:function(e,n,o){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=o("b0a9"),t=o("a1e7"),r=o("e485"),s={data:function(){return{showBaseInfo:!1,showCardInfo:!1,isGetCard:!1,userBaseInfo:{},userCardInfo:{},modalBaseName:"",modalCardInfo:{}}},methods:{openBeseShow:function(){this.modalBaseName=this.userBaseInfo.name,this.showBaseInfo=!0},closeBaseShow:function(){this.userBaseInfo.name=this.modalBaseName,this.showBaseInfo=!1},openCardShow:function(){this.modalCardInfo=JSON.parse(JSON.stringify(this.userCardInfo)),this.showCardInfo=!0},closeCardShow:function(){this.showCardInfo=!1,this.userCardInfo=this.modalCardInfo},updateBaseInfo:function(){var n=this,o=(0,r.inputCheck)("姓名","string",this.userBaseInfo.name);"ok"===o?(e.showLoading({title:"修改中"}),(0,a.updateBaseInfo)(e.getStorageSync("userID"),{avatarUrl:this.userBaseInfo.avatarUrl,name:this.userBaseInfo.name}).then((function(o){200===o.data.code?(e.hideLoading(),e.showToast({title:"修改成功",icon:"success"}),n.showBaseInfo=!1):(e.hideLoading(),n.userBaseInfo.name=n.modalBaseName,n.showBaseInfo=!1,(0,t.error)("更新失败"))})).catch((function(){e.hideLoading(),n.userBaseInfo.name=n.modalBaseName,n.showBaseInfo=!1,(0,t.error)("更新失败，请检查网络")}))):(0,t.error)(o)},updateCardInfo:function(){var n=this,o=(0,r.inputCheck)("姓名","string",this.userCardInfo.name),s=(0,r.inputCheck)("手机号","phone",this.userCardInfo.phone);"ok"!==o?(0,t.error)(o):"ok"!==s?(0,t.error)(s):(e.showLoading({title:"修改中"}),(0,a.updateCardInfo)(this.userCardInfo.relationId,{gender:this.userCardInfo.gender,name:this.userCardInfo.name,phone:this.userCardInfo.phone,type:this.userCardInfo.type}).then((function(o){200===o.data.code?(e.hideLoading(),n.showCardInfo=!1,e.showToast({title:"修改成功",icon:"success"})):(e.hideLoading(),n.userCardInfo=n.modalCardInfo,n.showCardInfo=!1,(0,t.error)("修改失败"))})).catch((function(){e.hideLoading(),n.userCardInfo=n.modalCardInfo,n.showCardInfo=!1,(0,t.error)("修改失败，请检查网络")})))},toAddCard:function(){e.navigateTo({url:"/pagesB/pages/center/addCard/addCard?isMyself="+!0})},getMyselfCardInfo:function(){var n=this;e.showLoading({title:"加载中"}),(0,a.getUserCardInfo)(e.getStorageSync("accountID")).then((function(o){var a=n;if(console.log(o),200===o.data.code){e.hideLoading();var t=o.data.data;0!==t.length?(t.forEach((function(n){if(0===n.type)return a.isGetCard=!0,console.log(n),a.userCardInfo=n,void e.setStorageSync("cardID",n.id)})),e.removeStorageSync("userInfo")):n.isGetCard=!1}})).catch((function(){e.hideLoading(),(0,t.error)("网络")}))}},onShow:function(){this.userBaseInfo=JSON.parse(e.getStorageSync("userInfo")),this.getMyselfCardInfo(),console.log("test")}};n.default=s}).call(this,o("543d")["default"])},"831e":function(e,n,o){"use strict";var a,t=function(){var e=this,n=e.$createElement,o=(e._self._c,e._f("getIdentityNum")(e.userCardInfo.identificationNumber)),a=e._f("getGender")(e.userCardInfo.gender),t=e._f("getDate")(e.userCardInfo.birthDate);e.$mp.data=Object.assign({},{$root:{f0:o,f1:a,f2:t}})},r=[];o.d(n,"b",(function(){return t})),o.d(n,"c",(function(){return r})),o.d(n,"a",(function(){return a}))},bf08:function(e,n,o){"use strict";o.r(n);var a=o("831e"),t=o("f0da");for(var r in t)"default"!==r&&function(e){o.d(n,e,(function(){return t[e]}))}(r);o("f191");var s,d=o("f0c5"),f=Object(d["a"])(t["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],s);n["default"]=f.exports},f0da:function(e,n,o){"use strict";o.r(n);var a=o("5284"),t=o.n(a);for(var r in a)"default"!==r&&function(e){o.d(n,e,(function(){return a[e]}))}(r);n["default"]=t.a},f191:function(e,n,o){"use strict";var a=o("0f97"),t=o.n(a);t.a}},[["22b0","common/runtime","common/vendor"]]]);