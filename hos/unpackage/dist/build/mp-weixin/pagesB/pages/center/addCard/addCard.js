(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesB/pages/center/addCard/addCard"],{"05d5":function(t,e,n){"use strict";var a,i=function(){var t=this,e=t.$createElement;t._self._c},r=[];n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return a}))},"10be":function(t,e,n){"use strict";n.r(e);var a=n("05d5"),i=n("b64a");for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n("17db");var o,d=n("f0c5"),f=Object(d["a"])(i["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],o);e["default"]=f.exports},"17db":function(t,e,n){"use strict";var a=n("84fb"),i=n.n(a);i.a},"84fb":function(t,e,n){},"9fa9":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n("b571"),i=n("0c3d"),r=n("941f"),o={data:function(){return{phoneArray:["+86"],phoneIndex:0,relateArray:["父母","兄弟/姐妹","伴侣","子女","同事/朋友","其他"],relateIndex:0,gender:1,form:{name:"",identify:"",phone:"",date:""},isMyself:!1,isValidate:!0}},methods:{test:function(){t.navigateBack({delta:1})},changeGender:function(e){"ok"===(0,a.inputCheck)("身份证","identify",this.form.identify)?(this.gender=(0,a.checkGender)(this.form.identify),e!==this.gender&&t.showToast({title:"请查看身份证号码是否有误",icon:"none"})):this.gender=e},inputCheck:function(e,n,i){this.isValidate=!0;var r=(0,a.inputCheck)(e,n,this.form[i]);if("ok"!==r)t.showToast({title:r,icon:"none"}),this.form[i]="";else if("identify"===n){var o=this.form[i].slice(6,14);this.form.date=(0,a.changeDateByIdentify)(o),this.gender=(0,a.checkGender)(this.form[i])}},validate:function(){for(var t in this.form)if(""===this.form[t]){(0,r.error)("请将信息填写完整"),this.isValidate=!1;break}this.isValidate&&this.addCard()},addCard:function(){var e,n=this;t.showLoading({title:"加载中"}),e=this.isMyself?0:parseInt(this.relateIndex)+1,(0,i.addCard)(t.getStorageSync("accountID"),{birthDate:this.form.date,gender:this.gender,identificationNumber:this.form.identify,name:this.form.name,phone:this.form.phone,type:e}).then((function(a){200===a.data.code&&(t.hideLoading(),t.showToast({title:"添加成功",icon:"success"}),0===e?(n.getMyselfCardInfo(),t.navigateBack({delta:1})):t.navigateBack({delta:1}))})).catch((function(){t.hideLoading(),(0,r.error)("添加失败")}))},getMyselfCardInfo:function(){(0,i.getUserCardInfo)(t.getStorageSync("accountID")).then((function(e){if(200===e.data.code){var n=e.data.data;n.length>0&&n.forEach((function(e,n){0!==e.type||t.setStorageSync("cardID",e.id)}))}})).catch((function(){}))},relateChange:function(t){this.relateIndex=t.detail.value}},onLoad:function(t){this.isMyself=t.isMyself}};e.default=o}).call(this,n("543d")["default"])},b64a:function(t,e,n){"use strict";n.r(e);var a=n("9fa9"),i=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=i.a},dfc8:function(t,e,n){"use strict";(function(t){n("e090");a(n("66fd"));var e=a(n("10be"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])}},[["dfc8","common/runtime","common/vendor"]]]);