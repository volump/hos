(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesB/pages/center/addCard/addCard"],{"10f5":function(e,t,n){"use strict";n.r(t);var a=n("c9b4"),i=n("8c0b");for(var r in i)"default"!==r&&function(e){n.d(t,e,(function(){return i[e]}))}(r);n("591b");var o,d=n("f0c5"),c=Object(d["a"])(i["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],o);t["default"]=c.exports},"47d7":function(e,t,n){"use strict";(function(e){n("b2d2");a(n("66fd"));var t=a(n("10f5"));function a(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},"591b":function(e,t,n){"use strict";var a=n("e0a7"),i=n.n(a);i.a},"67ef":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n("e485"),i=n("b0a9"),r=n("a1e7"),o={data:function(){return{phoneArray:["+86"],phoneIndex:0,relateArray:["父母","兄弟/姐妹","伴侣","子女","同事/朋友","其他"],relateIndex:0,gender:1,form:{name:"",identify:"",phone:"",date:""},isMyself:!1,isValidate:!0}},methods:{test:function(){e.navigateBack({delta:1})},changeGender:function(t){"ok"===(0,a.inputCheck)("身份证","identify",this.form.identify)?(this.gender=(0,a.checkGender)(this.form.identify),t!==this.gender&&e.showToast({title:"请查看身份证号码是否有误",icon:"none"})):this.gender=t},inputCheck:function(t,n,i){this.isValidate=!0;var r=(0,a.inputCheck)(t,n,this.form[i]);if("ok"!==r)e.showToast({title:r,icon:"none"}),this.form[i]="";else if("identify"===n){var o=this.form[i].slice(6,14);this.form.date=(0,a.changeDateByIdentify)(o),this.gender=(0,a.checkGender)(this.form[i])}},validate:function(){for(var e in this.form)if(""===this.form[e]){(0,r.error)("请将信息填写完整"),this.isValidate=!1;break}this.isValidate&&this.addCard()},addCard:function(){var t,n=this;e.showLoading({title:"加载中"}),t=this.isMyself?0:parseInt(this.relateIndex)+1,(0,i.addCard)(e.getStorageSync("accountID"),{birthDate:this.form.date,gender:this.gender,identificationNumber:this.form.identify,name:this.form.name,phone:this.form.phone,type:t}).then((function(a){200===a.data.code&&(e.hideLoading(),e.showToast({title:"添加成功",icon:"success"}),0===t?(n.getMyselfCardInfo(),e.navigateBack({delta:1})):e.navigateBack({delta:1}))})).catch((function(){e.hideLoading(),(0,r.error)("添加失败")}))},getMyselfCardInfo:function(){(0,i.getUserCardInfo)(e.getStorageSync("accountID")).then((function(t){if(200===t.data.code){var n=t.data.data;n.length>0&&n.forEach((function(t,n){0!==t.type||e.setStorageSync("cardID",t.id)}))}})).catch((function(){}))},relateChange:function(e){this.relateIndex=e.detail.value}},onLoad:function(e){this.isMyself=e.isMyself}};t.default=o}).call(this,n("543d")["default"])},"8c0b":function(e,t,n){"use strict";n.r(t);var a=n("67ef"),i=n.n(a);for(var r in a)"default"!==r&&function(e){n.d(t,e,(function(){return a[e]}))}(r);t["default"]=i.a},c9b4:function(e,t,n){"use strict";var a,i=function(){var e=this,t=e.$createElement;e._self._c},r=[];n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return a}))},e0a7:function(e,t,n){}},[["47d7","common/runtime","common/vendor"]]]);